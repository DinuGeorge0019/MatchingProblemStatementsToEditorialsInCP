{"link": "https://codeforces.com//contest/846/problem/F", "problemId": "121002", "shortId": "846F", "contest_number": "846", "name": "F. Random Query", "statement": "You are given an array  consisting of  positive integers. You pick two integer numbers  and  from  to , inclusive (numbers are picked randomly, equiprobably and independently). If , then you swap values of  and . You have to calculate the expected value of the number of unique elements in segment of the array from index  to index , inclusive (-indexed).", "input": "The first line contains one integer number  . The second line contains  integer numbers , , ...   \u2014 elements of the array.", "output": "Print one number \u2014 the expected number of unique elements in chosen segment.  Your answer will be considered correct if its absolute or relative error doesn't exceed  \u2014 formally, the answer is correct if , where  is jury's answer, and  is your answer.", "tutorial": "For each index  we will find the number of pairs  (before swapping) such that  is the first occurence of  in the chosen segment. Let  be previous occurence of  before  (if  is the first occurence, then  if we suppose the array to be -indexed). Let's find the number of pairs such that , and then multiply it by  and subtract  for this index.  has to be in segment , and  has to be in segment , so the number of ways to choose this pair is .The value we receive as the sum of these values over all segments is the total number of distinct elements over all pairs , so we need to divide it by the number of these pairs.", "solution": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long LL;\n#define N 1048576\nint n , a[ N ] , p[ N ];\nint main(){\n  scanf( \"%d\" , &n );\n  for( int i = 1 ; i <= n ; i ++ )\n    scanf( \"%d\" , &a[ i ] );\n  LL s = 0 , ans = 0;\n  for( int i = 1 ; i <= n ; i ++ ){\n    s += i - p[ a[ i ] ];\n    p[ a[ i ] ] = i;\n    ans += s;\n  }\n  ans = ans + ans - n;\n  double fans = (double)ans / ( (LL)n * n );\n  printf( \"%.12f\\n\" , fans );\n}\n", "interactive": false, "noSolution": false, "noTutorial": false}