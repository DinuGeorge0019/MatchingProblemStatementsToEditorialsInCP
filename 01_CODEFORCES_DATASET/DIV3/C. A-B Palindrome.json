{"link": "https://codeforces.com//contest/1512/problem/C", "problemId": "953476", "shortId": "1512C", "contest_number": "1512", "name": "C. A-B Palindrome", "statement": "You are given a string  consisting of the characters '', '', and ''. You need to replace all the characters with '' in the string  by '' or '' so that the string becomes a palindrome and has   characters '' and   characters ''. Note that each of the characters '' is replaced  from the others.A string  of length  is called a palindrome if the equality  is true for all  ().For example, if \"\",  and , then you can replace the characters '' in the following ways:   \"\";  \"\". For the given string  and the numbers  and , replace all the characters with '' in the string  by '' or '' so that the string becomes a palindrome and has   characters '' and   characters ''.", "input": "The first line contains a single integer  (). Then  test cases follow. The first line of each test case contains two integers  and  (, ). The second line of each test case contains the string  of length , consisting of the characters '', '', and ''. It is guaranteed that the sum of the string lengths of  over all test cases does not exceed .", "output": "For each test case, output:    \"\", if you can't replace all the characters '' in the string  by '' or '' so that the string becomes a palindrome and that it contains   characters '' and   characters '';  the string that is obtained as a result of the replacement, otherwise.  If there are several suitable ways to replace characters, you can output any.", "tutorial": "First, let's find such positions $$$i$$$ ($$$1 \\le i \\le n$$$) such that $$$s[i]\\ne$$$'' (symbols in symmetric positions are uniquely determined):   If $$$s[n-i+1]=$$$'', then $$$s[n-i+1] = s[i]$$$;  If $$$s[i] \\ne s[n-i+1]$$$, then at the end we will not get a palindrome in any way, so the answer is ''. Note that after such a replacement, the remaining characters '' are split into pairs, except maybe the central one. If the center character is '' then it is necessary to put the character '' if $$$a$$$ is odd, or '' if $$$b$$$ is odd (if neither $$$a$$$, nor $$$b$$$ is odd, then the answer is '').Now the remaining characters '' are split into pairs (i.e. if $$$s[i]=$$$'', then $$$s[n-i+1]=$$$''). This allows the remaining characters '' and '' to be replaced greedily:   If $$$s[i]=$$$'' and $$$a>1$$$, then $$$s[i]=s[n-i+1]=$$$'' and decrease $$$a$$$ for $$$2$$$;  If $$$s[i]=$$$'' and $$$b>1$$$, then $$$s[i]=s[n-i +1]=$$$'' and decrease $$$b$$$ for $$$2$$$;  Otherwise the answer is ''. ", "solution": "#include <bits/stdc++.h>\nusing namespace std;\n\nvoid no() {\n  cout << \"-1\" << endl;\n}\n\nvoid solve() {\n  int a, b;\n  cin >> a >> b;\n  string s;\n  cin >> s;\n  for (int times = 0; times < 2; times++) {\n    for (int i = 0; i < (int) s.size(); i++) {\n      int j = (int) s.size() - i - 1;\n      if (s[i] != '?') {\n        if (s[j] == '?') {\n          s[j] = s[i];\n        } else if (s[i] != s[j]) {\n          no();\n          return;\n        }\n      }\n    }\n    reverse(s.begin(), s.end());\n  }\n  a -= count(s.begin(), s.end(), '0');\n  b -= count(s.begin(), s.end(), '1');\n  int ques = count(s.begin(), s.end(), '?');\n  bool emptyMid = (s.size() % 2 == 1 && s[s.size() / 2] == '?');\n  if (a < 0 || b < 0 || a + b != ques || (emptyMid && a % 2 == 0 && b % 2 == 0)) {\n    no();\n    return;\n  }\n  if (a % 2 == 1 || b % 2 == 1) {\n    int i = s.size() / 2;\n    if (s[i] != '?') {\n      no();\n      return;\n    }\n    s[i] = (a % 2 == 1 ? '0' : '1');\n    if (a % 2 == 1) {\n      a--;\n    } else {\n      b--;\n    }\n  }\n  if (a % 2 == 1 || b % 2 == 1) {\n    no();\n    return;\n  }\n  for (int i = 0; i < (int) s.size(); i++) {\n    if (s[i] == '?') {\n      int j = s.size() - i - 1;\n      if (a > 0) {\n        a -= 2;\n        s[i] = s[j] = '0';\n      } else {\n        b -= 2;\n        s[i] = s[j] = '1';\n      }\n    }\n  }\n  cout << s << endl;\n}\n\nint main() {\n  int tests;\n  cin >> tests;\n  while (tests-- > 0) {\n    solve();\n  }\n  return 0;\n}", "interactive": false, "noSolution": false, "noTutorial": false}